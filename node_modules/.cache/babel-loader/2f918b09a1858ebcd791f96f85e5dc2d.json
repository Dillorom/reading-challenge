{"ast":null,"code":"import _classCallCheck from \"/home/learn/final-project/reading-challenge-client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/learn/final-project/reading-challenge-client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/learn/final-project/reading-challenge-client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/learn/final-project/reading-challenge-client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/learn/final-project/reading-challenge-client/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/learn/final-project/reading-challenge-client/src/containers/Challenge/BookInfo/BookInfo.js\";\nimport React, { Component } from \"react\";\nimport Axios from \"axios\";\nimport PropTypes from \"prop-types\";\nvar apiKey = process.env.REACT_APP_API_KEY;\n\nvar BookInfo =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(BookInfo, _Component);\n\n  function BookInfo(props) {\n    var _this;\n\n    _classCallCheck(this, BookInfo);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(BookInfo).call(this, props));\n\n    _this.getDescription = function () {\n      var bookId = _this.props.bookData.best_book.id;\n      var requestUri = \"https://cors-anywhere.herokuapp.com/\" + \"https://www.goodreads.com/book/show/\".concat(bookId, \"?key=\").concat(apiKey);\n      Axios.get(requestUri).then(function (res) {\n        var parser = new DOMParser();\n        var XMLResponse = parser.parseFromString(res.data, \"application/xml\");\n        var parseError = XMLResponse.getElementsByTagName(\"parsererror\");\n\n        if (parseError.length) {\n          _this.setState({\n            error: \"There was an error fetching results.\"\n          });\n        } else {\n          var description = XMLResponse.getElementsByTagName(\"description\")[0].innerHTML;\n          description = description.replace(\"<![CDATA[\", \"\").replace(\"]]>\", \"\");\n\n          if (!description) {\n            description = \"No description found.\";\n          }\n\n          _this.setState({\n            description: description\n          });\n        }\n      }).catch(function (error) {\n        _this.setState({\n          error: error.toString()\n        });\n      });\n    };\n\n    _this.state = {\n      description: \"Fetching description for this book...\",\n      error: \"\"\n    };\n    return _this;\n  }\n\n  _createClass(BookInfo, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.getDescription();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var bookData = this.props.bookData;\n      return React.createElement(\"div\", {\n        className: \"row col-lg-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        className: \"btn btn-primary\",\n        onClick: this.props.collapseBook,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59\n        },\n        __self: this\n      }, \"<< Go Back\"), React.createElement(\"h3\", {\n        className: \"col-lg-12 mb-3 mt-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63\n        },\n        __self: this\n      }, bookData.best_book.title), React.createElement(\"div\", {\n        className: \"col-lg-2 col-sm-4 \",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: bookData.best_book.image_url,\n        height: \"200px\",\n        width: \"130px\",\n        alt: \"book cover\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65\n        },\n        __self: this\n      }), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }, \"By:\", \" \", React.createElement(\"span\", {\n        className: \"font-weight-bold\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }, bookData.best_book.author.name)), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }, \"Avg. Rating: \", bookData.average_rating)), React.createElement(\"div\", {\n        className: \"col-lg-10 col-sm-8\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, this.state.error && React.createElement(\"p\", {\n        className: \"text-danger\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, this.state.error) || React.createElement(\"p\", {\n        dangerouslySetInnerHTML: {\n          __html: this.state.description\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }, \"Published Date:\", \" \", \"\".concat(bookData.original_publication_day, \"/\").concat(bookData.original_publication_month, \"/\").concat(bookData.original_publication_year), \".\", \" \", React.createElement(\"a\", {\n        href: \"https://www.goodreads.com/book/show/\".concat(bookData.best_book.id),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }, \"Learn More\"))));\n    }\n  }]);\n\n  return BookInfo;\n}(Component);\n\nBookInfo.propTypes = {\n  bookData: PropTypes.object,\n  collapseBook: PropTypes.func\n};\nexport default BookInfo;","map":{"version":3,"sources":["/home/learn/final-project/reading-challenge-client/src/containers/Challenge/BookInfo/BookInfo.js"],"names":["React","Component","Axios","PropTypes","apiKey","process","env","REACT_APP_API_KEY","BookInfo","props","getDescription","bookId","bookData","best_book","id","requestUri","get","then","res","parser","DOMParser","XMLResponse","parseFromString","data","parseError","getElementsByTagName","length","setState","error","description","innerHTML","replace","catch","toString","state","collapseBook","title","image_url","author","name","average_rating","__html","original_publication_day","original_publication_month","original_publication_year","propTypes","object","func"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport Axios from \"axios\";\nimport PropTypes from \"prop-types\";\n\nconst apiKey = process.env.REACT_APP_API_KEY;\n\nclass BookInfo extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      description: \"Fetching description for this book...\",\n      error: \"\"\n    };\n  }\n\n  componentDidMount() {\n    this.getDescription();\n  }\n\n  getDescription = () => {\n    const bookId = this.props.bookData.best_book.id;\n    const requestUri =\n      `https://cors-anywhere.herokuapp.com/` +\n      `https://www.goodreads.com/book/show/${bookId}?key=${apiKey}`;\n    Axios.get(requestUri)\n      .then(res => {\n        const parser = new DOMParser();\n        const XMLResponse = parser.parseFromString(res.data, \"application/xml\");\n\n        const parseError = XMLResponse.getElementsByTagName(\"parsererror\");\n\n        if (parseError.length) {\n          this.setState({\n            error: \"There was an error fetching results.\"\n          });\n        } else {\n          let description = XMLResponse.getElementsByTagName(\"description\")[0]\n            .innerHTML;\n\n          description = description.replace(\"<![CDATA[\", \"\").replace(\"]]>\", \"\");\n\n          if (!description) {\n            description = \"No description found.\";\n          }\n          this.setState({ description });\n        }\n      })\n      .catch(error => {\n        this.setState({\n          error: error.toString()\n        });\n      });\n  };\n\n  render() {\n    const { bookData } = this.props;\n    return (\n      <div className=\"row col-lg-12\">\n        <button className=\"btn btn-primary\" onClick={this.props.collapseBook}>\n          {\"<< Go Back\"}\n        </button>\n\n        <h3 className=\"col-lg-12 mb-3 mt-3\">{bookData.best_book.title}</h3>\n        <div className=\"col-lg-2 col-sm-4 \">\n          <img\n            src={bookData.best_book.image_url}\n            height=\"200px\"\n            width=\"130px\"\n            alt=\"book cover\"\n          />\n          <p>\n            By:{\" \"}\n            <span className=\"font-weight-bold\">\n              {bookData.best_book.author.name}\n            </span>\n          </p>\n          <p>Avg. Rating: {bookData.average_rating}</p>\n        </div>\n        <div className=\"col-lg-10 col-sm-8\">\n          {(this.state.error && (\n            <p className=\"text-danger\">{this.state.error}</p>\n          )) || (\n            <p dangerouslySetInnerHTML={{ __html: this.state.description }} />\n          )}\n        </div>\n        <div>\n          <p>\n            Published Date:{\" \"}\n            {`${bookData.original_publication_day}/${\n              bookData.original_publication_month\n            }/${bookData.original_publication_year}`}\n            .{\" \"}\n            <a\n              href={`https://www.goodreads.com/book/show/${\n                bookData.best_book.id\n              }`}\n            >\n              Learn More\n            </a>\n          </p>\n        </div>\n      </div>\n    );\n  }\n}\n\nBookInfo.propTypes = {\n  bookData: PropTypes.object,\n  collapseBook: PropTypes.func\n};\n\nexport default BookInfo;"]},"metadata":{},"sourceType":"module"}