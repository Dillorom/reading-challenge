{"ast":null,"code":"import _objectSpread from \"/home/learn/final-project/reading-challenge-client/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nvar API_URL = process.env.REACT_APP_API_URL;\nexport var setGoal = function setGoal(goal) {\n  return {\n    type: \"SET_GOAL\",\n    goal: goal\n  };\n}; // export const likeCounter = (id) => {\n//   //debugger\n//   return {\n//     type: 'INCREMENT_LIKE_COUNTER',\n//     payload: id\n//   }\n//  }\n\nexport var likeCounter = function likeCounter(book, id) {\n  var likes = book.likes;\n\n  var newbook = _objectSpread({}, book, {\n    likes: book.likes + 1\n  });\n\n  var data = {\n    method: 'PATCH',\n    headers: {\n      'Accept': 'application/json',\n      'Content-Type': 'application/json',\n      'Access-Control-Allow-Methods': '*'\n    },\n    body: JSON.stringify(newbook) //debugger\n\n  };\n  return function (dispatch) {\n    fetch(\"\".concat(API_URL, \"/books/\").concat(id), data) // .then(response => response.json())\n    .then(function (response) {\n      return response.json();\n    }) //.then(console.log())\n    // .then(returnedData => console.log(book))\n    .then(function (newbook) {\n      return dispatch({\n        type: 'INCREMENT_LIKE_COUNTER',\n        payload: newbook\n      });\n    }) //console.log(\"this is book: \", book))\n    .catch(function (err) {\n      return err;\n    });\n  };\n};\nexport var viewBook = function viewBook(payload) {\n  return {\n    type: 'VIEW_BOOK',\n    payload: payload\n  };\n};\nexport var fetchBooks = function fetchBooks() {\n  var data = {\n    method: 'GET',\n    headers: {\n      'Accept': 'application/json',\n      'Content-Type': 'application/json' //'Authorization': sessionStorage.jwt\n\n    }\n  };\n  return function (dispatch) {\n    fetch(\"\".concat(API_URL, \"/books\"), data).then(function (response) {\n      return response.json();\n    }).then(function (books) {\n      dispatch({\n        type: 'FETCH_BOOKS',\n        payload: books\n      });\n    }).catch(function (err) {\n      return err;\n    });\n  };\n};\nexport var addBook = function addBook(book) {\n  var data = {\n    method: 'POST',\n    headers: {\n      'Accept': 'application/json',\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(book)\n  };\n  return function (dispatch) {\n    fetch(\"\".concat(API_URL, \"/books\"), data).then(function (response) {\n      return response.json();\n    }).then(function (book) {\n      return dispatch({\n        type: 'ADD_BOOK',\n        payload: book\n      });\n    }).catch(function (err) {\n      return err;\n    });\n  };\n};\nexport var deleteBook = function deleteBook(id) {\n  var data = {\n    method: 'DELETE',\n    headers: {\n      'Accept': 'application/json',\n      'Content-Type': 'application/json'\n    }\n  };\n  return function (dispatch) {\n    fetch(\"\".concat(API_URL, \"/books/\").concat(id), data).then(function (response) {\n      return response.json();\n    }).then(function (book) {\n      return dispatch({\n        type: 'DELETE_BOOK',\n        payload: book\n      });\n    }).catch(function (err) {\n      return err;\n    });\n  };\n};\nexport var login = function login(user) {\n  return {\n    type: 'LOGIN',\n    user: user\n  };\n};\nexport var sortBooksByLikes = function sortBooksByLikes(books) {\n  return {\n    type: 'SORT_BY_LIKES',\n    payload: books\n  };\n};","map":{"version":3,"sources":["/home/learn/final-project/reading-challenge-client/src/actions/index.js"],"names":["API_URL","process","env","REACT_APP_API_URL","setGoal","goal","type","likeCounter","book","id","likes","newbook","data","method","headers","body","JSON","stringify","dispatch","fetch","then","response","json","payload","catch","err","viewBook","fetchBooks","books","addBook","deleteBook","login","user","sortBooksByLikes"],"mappings":"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","sourcesContent":["const API_URL = process.env.REACT_APP_API_URL;\n\nexport const setGoal = goal => {\n    return {\n      type: \"SET_GOAL\",\n      goal\n    };\n  };\n  \n  // export const likeCounter = (id) => {\n  //   //debugger\n  //   return {\n  //     type: 'INCREMENT_LIKE_COUNTER',\n  //     payload: id\n  //   }\n  //  }\n\n  \n  export const likeCounter = (book, id) => {\n    let likes = book.likes;\n    let  newbook = {...book, likes: book.likes +1}\n      \n    let data = {\n      method: 'PATCH',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Methods': '*'\n      },\n      body: JSON.stringify(newbook)\n    }\n    //debugger\n    return dispatch => {\n      fetch(`${API_URL}/books/${ id }`, data)\n        // .then(response => response.json())\n        .then(response => response.json())\n        //.then(console.log())\n        // .then(returnedData => console.log(book))\n        .then(newbook => dispatch({\n          type: 'INCREMENT_LIKE_COUNTER',\n          payload: newbook\n        }))\n      //console.log(\"this is book: \", book))\n        .catch(err => err)\n     }\n     \n }\n\n \n  export const viewBook = (payload) => {\n    return {\n      type: 'VIEW_BOOK',\n      payload\n    }\n  }\n\n  export const fetchBooks = () => {\n    let data = {\n      method: 'GET',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json',\n        //'Authorization': sessionStorage.jwt\n      }\n    }\n\n    return dispatch => {\n      fetch(`${ API_URL }/books`, data)\n        .then(response => response.json())\n        .then(books => {\n          dispatch({\n              type: 'FETCH_BOOKS',\n              payload: books\n          })\n        })\n        .catch(err => err)\n    }\n  }\n  \n  export const addBook = book => {\n    let data = {\n      method: 'POST',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(book)\n    }\n  \n    return dispatch => {\n      fetch(`${ API_URL }/books`, data)\n        .then(response => response.json())\n        .then(book => dispatch({\n          type: 'ADD_BOOK',\n          payload: book\n        }))\n        .catch(err => err)\n    }\n  }\n  \n  export const deleteBook = id => {\n    let data = {\n      method: 'DELETE',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      }\n    }\n  \n    return dispatch => {\n      fetch(`${ API_URL }/books/${ id }`, data)\n        .then(response => response.json())\n        .then(book => dispatch({\n          type: 'DELETE_BOOK',\n          payload: book\n        }))\n        .catch(err => err)\n    }\n  }\n\nexport const login = user => {\n  return {\n    type: 'LOGIN',\n    user\n\n  }\n \n};\n\nexport const sortBooksByLikes = books => {\n  return {\n    type: 'SORT_BY_LIKES',\n    payload: books\n  }\n}"]},"metadata":{},"sourceType":"module"}