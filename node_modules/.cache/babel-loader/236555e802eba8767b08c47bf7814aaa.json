{"ast":null,"code":"import _toConsumableArray from \"/home/learn/final-project/reading-challenge-client/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\n\nvar _this = this;\n\nvar API_URL = process.env.REACT_APP_API_URL;\nexport var setGoal = function setGoal(goal) {\n  return {\n    type: \"SET_GOAL\",\n    goal: goal\n  };\n};\nexport var addBook = function addBook(book) {\n  return {\n    type: \"ADD_BOOK\",\n    book: book\n  };\n}; //  export const deleteBook = bookId => {\n//    return{\n//     type: \"DELETE_BOOK\",\n//     bookId\n//    };\n//  };\n\nexport var deleteBook = function deleteBook(bookId) {\n  var request = {\n    method: 'DELETE'\n  };\n  return fetch(\"\".concat(API_URL, \"/books/\").concat(bookId), request).then(function (response) {\n    if (response.ok) {\n      var index = _this.props.books.findIndex(function (book) {\n        return book.id === bookId;\n      });\n\n      _this.setState({\n        books: _toConsumableArray(_this.props.books.slice(0, index)).concat(_toConsumableArray(_this.props.books.slice(index + 1)))\n      });\n    } else {\n      window.alert(\"Unable to delete the book.\");\n    }\n  }).catch(function (err) {\n    return console.log(\"Received this error while trying to delete a book:\", err);\n  });\n};","map":{"version":3,"sources":["/home/learn/final-project/reading-challenge-client/src/actions/index.js"],"names":["API_URL","process","env","REACT_APP_API_URL","setGoal","goal","type","addBook","book","deleteBook","bookId","request","method","fetch","then","response","ok","index","props","books","findIndex","id","setState","slice","window","alert","catch","err","console","log"],"mappings":";;;;AAAA,IAAMA,OAAO,GAAGC,OAAO,CAACC,GAAR,CAAYC,iBAA5B;AAEA,OAAO,IAAMC,OAAO,GAAG,SAAVA,OAAU,CAAAC,IAAI,EAAI;AAC3B,SAAO;AACLC,IAAAA,IAAI,EAAE,UADD;AAELD,IAAAA,IAAI,EAAJA;AAFK,GAAP;AAID,CALI;AAOL,OAAO,IAAME,OAAO,GAAG,SAAVA,OAAU,CAAAC,IAAI,EAAI;AAC7B,SAAO;AACLF,IAAAA,IAAI,EAAE,UADD;AAELE,IAAAA,IAAI,EAAJA;AAFK,GAAP;AAID,CALM,C,CAOT;AACA;AACA;AACA;AACA;AACA;;AAEC,OAAO,IAAMC,UAAU,GAAG,SAAbA,UAAa,CAAAC,MAAM,EAAI;AACjC,MAAMC,OAAO,GAAG;AACdC,IAAAA,MAAM,EAAE;AADM,GAAhB;AAGF,SAAOC,KAAK,WAAIb,OAAJ,oBAAqBU,MAArB,GAA+BC,OAA/B,CAAL,CACFG,IADE,CACG,UAAAC,QAAQ,EAAI;AACd,QAAIA,QAAQ,CAACC,EAAb,EAAgB;AACZ,UAAMC,KAAK,GAAG,KAAI,CAACC,KAAL,CAAWC,KAAX,CAAiBC,SAAjB,CAA2B,UAAAZ,IAAI;AAAA,eAAIA,IAAI,CAACa,EAAL,KAAYX,MAAhB;AAAA,OAA/B,CAAd;;AACA,MAAA,KAAI,CAACY,QAAL,CAAc;AACVH,QAAAA,KAAK,qBACE,KAAI,CAACD,KAAL,CAAWC,KAAX,CAAiBI,KAAjB,CAAuB,CAAvB,EAA0BN,KAA1B,CADF,4BAEE,KAAI,CAACC,KAAL,CAAWC,KAAX,CAAiBI,KAAjB,CAAuBN,KAAK,GAAG,CAA/B,CAFF;AADK,OAAd;AAMH,KARD,MAQO;AACHO,MAAAA,MAAM,CAACC,KAAP,CAAa,4BAAb;AACH;AACJ,GAbE,EAcFC,KAdE,CAcI,UAAAC,GAAG;AAAA,WAAIC,OAAO,CAACC,GAAR,CAAY,oDAAZ,EAAkEF,GAAlE,CAAJ;AAAA,GAdP,CAAP;AAeD,CAnBO","sourcesContent":["const API_URL = process.env.REACT_APP_API_URL;\n\nexport const setGoal = goal => {\n    return {\n      type: \"SET_GOAL\",\n      goal\n    };\n  };\n\n  export const addBook = book => {\n    return {\n      type: \"ADD_BOOK\",\n      book\n    };\n  };\n\n//  export const deleteBook = bookId => {\n//    return{\n//     type: \"DELETE_BOOK\",\n//     bookId\n//    };\n//  };\n\n export const deleteBook = bookId => {\n    const request = {\n      method: 'DELETE'\n    }\n  return fetch(`${API_URL}/books/${bookId}`, request)\n      .then(response => {\n          if (response.ok){\n              const index = this.props.books.findIndex(book => book.id === bookId)  \n              this.setState({\n                  books: [\n                      ...this.props.books.slice(0, index),\n                      ...this.props.books.slice(index + 1)\n                  ]\n              })\n          } else {\n              window.alert(\"Unable to delete the book.\")\n          }\n      })\n      .catch(err => console.log(\"Received this error while trying to delete a book:\", err))\n};\n"]},"metadata":{},"sourceType":"module"}