{"ast":null,"code":"import _toConsumableArray from \"/home/learn/final-project/reading-challenge-client/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\n\nvar _this = this;\n\nvar API_URL = process.env.REACT_APP_API_URL;\nexport var setGoal = function setGoal(goal) {\n  return {\n    type: \"SET_GOAL\",\n    goal: goal\n  };\n}; //  export const deleteBook = bookId => {\n//    return{\n//     type: \"DELETE_BOOK\",\n//     bookId\n//    };\n//  };\n\nexport var deleteBook = function deleteBook(bookId) {\n  return function (dispatch) {\n    dispatch({\n      type: 'DELETE_BOOK'\n    });\n    var request = {\n      method: 'DELETE'\n    };\n    return fetch(\"\".concat(API_URL, \"/books/\").concat(bookId), request).then(function (response) {\n      if (response.ok) {\n        var index = _this.props.books.findIndex(function (book) {\n          return book.id === bookId;\n        });\n\n        _this.setState({\n          books: _toConsumableArray(_this.props.books.slice(0, index)).concat(_toConsumableArray(_this.props.books.slice(index + 1)))\n        });\n      } else {\n        window.alert(\"Unable to delete the book.\");\n      }\n    }).catch(function (err) {\n      return console.log(\"Received this error while trying to delete a book:\", err);\n    });\n  };\n};\nexport var addBook = function addBook(book) {\n  return function (dispatch) {\n    dispatch({\n      type: \"ADD_BOOK\"\n    });\n    var request = {\n      method: 'POST',\n      body: JSON.stringify({\n        book: book\n      }),\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    };\n    return fetch(\"\".concat(API_URL, \"/books\"), request).then(function (response) {\n      return response.json();\n    }).then(function (book) {\n      return _this.setState({\n        books: _this.props.books.concat(book)\n      });\n    });\n  };\n}; // export const signup = user => {\n//   return(dispatch) => {\n//     dispatch({type: 'LOGIN'});\n//     const request = {\n//       method: 'GET',\n//       body: JSON.stringify({\n//           user: user\n//       }),\n//       headers: {\n//           'Content-Type': 'application/json'\n//       }\n//   };\n//     return fetch(`${API_URL}/users`, request)\n//     .then(response => response.json())\n//     .then(user => this.setState({\n//       users: this.props.users.concat(user)\n//     }))\n//   }\n// }","map":{"version":3,"sources":["/home/learn/final-project/reading-challenge-client/src/actions/index.js"],"names":["API_URL","process","env","REACT_APP_API_URL","setGoal","goal","type","deleteBook","bookId","dispatch","request","method","fetch","then","response","ok","index","props","books","findIndex","book","id","setState","slice","window","alert","catch","err","console","log","addBook","body","JSON","stringify","headers","json","concat"],"mappings":";;;;AAAA,IAAMA,OAAO,GAAGC,OAAO,CAACC,GAAR,CAAYC,iBAA5B;AAEA,OAAO,IAAMC,OAAO,GAAG,SAAVA,OAAU,CAAAC,IAAI,EAAI;AAC3B,SAAO;AACLC,IAAAA,IAAI,EAAE,UADD;AAELD,IAAAA,IAAI,EAAJA;AAFK,GAAP;AAID,CALI,C,CAQP;AACA;AACA;AACA;AACA;AACA;;AAEA,OAAO,IAAME,UAAU,GAAG,SAAbA,UAAa,CAAAC,MAAM,EAAI;AAClC,SAAO,UAACC,QAAD,EAAc;AACnBA,IAAAA,QAAQ,CAAC;AAACH,MAAAA,IAAI,EAAE;AAAP,KAAD,CAAR;AACA,QAAMI,OAAO,GAAG;AAChBC,MAAAA,MAAM,EAAE;AADQ,KAAhB;AAGE,WAAOC,KAAK,WAAIZ,OAAJ,oBAAqBQ,MAArB,GAA+BE,OAA/B,CAAL,CACJG,IADI,CACC,UAAAC,QAAQ,EAAI;AAChB,UAAIA,QAAQ,CAACC,EAAb,EAAgB;AACd,YAAMC,KAAK,GAAG,KAAI,CAACC,KAAL,CAAWC,KAAX,CAAiBC,SAAjB,CAA2B,UAAAC,IAAI;AAAA,iBAAIA,IAAI,CAACC,EAAL,KAAYb,MAAhB;AAAA,SAA/B,CAAd;;AACA,QAAA,KAAI,CAACc,QAAL,CAAc;AACZJ,UAAAA,KAAK,qBACA,KAAI,CAACD,KAAL,CAAWC,KAAX,CAAiBK,KAAjB,CAAuB,CAAvB,EAA0BP,KAA1B,CADA,4BAEA,KAAI,CAACC,KAAL,CAAWC,KAAX,CAAiBK,KAAjB,CAAuBP,KAAK,GAAG,CAA/B,CAFA;AADO,SAAd;AAMD,OARD,MAQO;AACLQ,QAAAA,MAAM,CAACC,KAAP,CAAa,4BAAb;AACD;AACF,KAbI,EAcJC,KAdI,CAcE,UAAAC,GAAG;AAAA,aAAIC,OAAO,CAACC,GAAR,CAAY,oDAAZ,EAAkEF,GAAlE,CAAJ;AAAA,KAdL,CAAP;AAeC,GApBL;AAqBD,CAtBM;AAwBP,OAAO,IAAMG,OAAO,GAAG,SAAVA,OAAU,CAAAV,IAAI,EAAI;AAC7B,SAAO,UAACX,QAAD,EAAc;AACnBA,IAAAA,QAAQ,CAAC;AAACH,MAAAA,IAAI,EAAE;AAAP,KAAD,CAAR;AACA,QAAMI,OAAO,GAAG;AACZC,MAAAA,MAAM,EAAE,MADI;AAEZoB,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACjBb,QAAAA,IAAI,EAAEA;AADW,OAAf,CAFM;AAKZc,MAAAA,OAAO,EAAE;AACL,wBAAgB;AADX;AALG,KAAhB;AASA,WAAOtB,KAAK,WAAIZ,OAAJ,aAAqBU,OAArB,CAAL,CACFG,IADE,CACG,UAAAC,QAAQ;AAAA,aAAIA,QAAQ,CAACqB,IAAT,EAAJ;AAAA,KADX,EAEFtB,IAFE,CAEG,UAAAO,IAAI;AAAA,aAAI,KAAI,CAACE,QAAL,CAAc;AACxBJ,QAAAA,KAAK,EAAE,KAAI,CAACD,KAAL,CAAWC,KAAX,CAAiBkB,MAAjB,CAAwBhB,IAAxB;AADiB,OAAd,CAAJ;AAAA,KAFP,CAAP;AAKD,GAhBD;AAiBD,CAlBM,C,CAoBP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sourcesContent":["const API_URL = process.env.REACT_APP_API_URL;\n\nexport const setGoal = goal => {\n    return {\n      type: \"SET_GOAL\",\n      goal\n    };\n  };\n\n \n//  export const deleteBook = bookId => {\n//    return{\n//     type: \"DELETE_BOOK\",\n//     bookId\n//    };\n//  };\n\nexport const deleteBook = bookId => {\n  return (dispatch) => {\n    dispatch({type: 'DELETE_BOOK'});\n    const request = {\n    method: 'DELETE'\n    }\n      return fetch(`${API_URL}/books/${bookId}`, request)\n        .then(response => {\n          if (response.ok){\n            const index = this.props.books.findIndex(book => book.id === bookId)  \n            this.setState({\n              books: [\n                ...this.props.books.slice(0, index),\n                ...this.props.books.slice(index + 1)\n              ]\n            })\n          } else {\n            window.alert(\"Unable to delete the book.\")\n          }\n        })\n        .catch(err => console.log(\"Received this error while trying to delete a book:\", err))\n      }\n};\n\nexport const addBook = book => {\n  return (dispatch) => {\n    dispatch({type: \"ADD_BOOK\"});\n    const request = {\n        method: 'POST',\n        body: JSON.stringify({\n            book: book\n        }),\n        headers: {\n            'Content-Type': 'application/json'\n        }\n    };\n    return fetch(`${API_URL}/books`, request)\n        .then(response => response.json())\n        .then(book => this.setState({\n            books: this.props.books.concat(book)\n          }))\n  }\n};\n\n// export const signup = user => {\n//   return(dispatch) => {\n//     dispatch({type: 'LOGIN'});\n//     const request = {\n//       method: 'GET',\n//       body: JSON.stringify({\n//           user: user\n//       }),\n//       headers: {\n//           'Content-Type': 'application/json'\n//       }\n//   };\n//     return fetch(`${API_URL}/users`, request)\n//     .then(response => response.json())\n//     .then(user => this.setState({\n//       users: this.props.users.concat(user)\n//     }))\n//   }\n// }"]},"metadata":{},"sourceType":"module"}